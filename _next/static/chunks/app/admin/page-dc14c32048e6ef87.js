(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{2241:function(e,t,a){Promise.resolve().then(a.bind(a,9803))},9803:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return M}});var s=a(7437),r=a(2265),o=a(9075),n=a(6337),l=a(7769),i=a(2208);let c=(0,r.createContext)(void 0),d="salon2024",h="salon_sano_posts",u="salon_sano_auth",m="salon_sano_password";function x(e){let{children:t}=e,[a,o]=(0,r.useState)([]),[n,l]=(0,r.useState)(!1),[i,x]=(0,r.useState)(d),[g,p]=(0,r.useState)({used:0,available:0}),f=()=>{try{let e=0;for(let t in localStorage)localStorage.hasOwnProperty(t)&&(e+=localStorage[t].length+t.length);p({used:e,available:4194304-e})}catch(e){console.error("Error calculating storage:",e)}},b=(e,t)=>{try{let a=e.length+t.length;if(g.used+a>4194304)throw Error("Storage quota would be exceeded");return localStorage.setItem(e,t),f(),!0}catch(e){return console.error("Storage error:",e),!1}};(0,r.useEffect)(()=>{f();let e=localStorage.getItem(m);e?(console.log("Found saved password:",e),x(e)):(console.log("No saved password, using default:",d),x(d),localStorage.setItem(m,d));let t=localStorage.getItem(u);try{let e=localStorage.getItem(h);if(e)o(JSON.parse(e));else{let e=[{id:"1",image:"/placeholder.svg?height=400&width=400",url:"https://instagram.com/p/example1",alt:"Beautiful straight hair transformation",createdAt:new Date().toISOString()},{id:"2",image:"/placeholder.svg?height=400&width=400",url:"https://instagram.com/p/example2",alt:"Keratin treatment results",createdAt:new Date().toISOString()},{id:"3",image:"/placeholder.svg?height=400&width=400",url:"https://instagram.com/p/example3",alt:"Healthy hair styling",createdAt:new Date().toISOString()}];o(e),b(h,JSON.stringify(e))}}catch(e){console.error("Error loading posts:",e),o([])}"true"===t&&l(!0)},[]),(0,r.useEffect)(()=>{f()},[a]);let y=async e=>{let t=[{...e,id:Date.now().toString(),createdAt:new Date().toISOString()},...a];return!!b(h,JSON.stringify(t))&&(o(t),!0)},w=async(e,t)=>{let s=a.map(a=>a.id===e?{...a,...t}:a);return!!b(h,JSON.stringify(s))&&(o(s),!0)};return(0,s.jsx)(c.Provider,{value:{posts:a,isAuthenticated:n,storageInfo:g,login:e=>(console.log("Attempting login with password:",e),console.log("Current stored password:",i),e===i&&(l(!0),localStorage.setItem(u,"true"),!0)),logout:()=>{l(!1),localStorage.removeItem(u)},changePassword:(e,t)=>e===i&&(x(t),localStorage.setItem(m,t),!0),addPost:y,removePost:e=>{let t=a.filter(t=>t.id!==e);o(t),b(h,JSON.stringify(t))},updatePost:w,clearAllPosts:()=>{o([]),localStorage.removeItem(h),f()}},children:t})}function g(){let e=(0,r.useContext)(c);if(void 0===e)throw Error("useAdmin must be used within an AdminProvider");return e}let p={he:{about:"אודות",services:"שירותים",gallery:"גלריה",contact:"צור קשר",bookYourSession:"קבעי תור",heroTitle:"שנו את השיער שלכן,",heroTitleItalic:"העלו את הבריאות שלכן",heroSubtitle:"טיפולי החלקה והזנה פרימיום",ourPhilosophy:"הפילוסופיה שלנו",aboutText1:"בסלון סאנו, אנחנו מאמינות ששיער יפה מתחיל משיער בריא. הגישה שלנו משלבת טכניקות מתקדמות עם מרכיבים טבעיים ומזינים כדי לשנות את השיער שלכן תוך שמירה על השלמות והחיוניות שלו.",aboutText2:"כל טיפול נבנה בקפידה לא רק כדי להחליק את השיער שלכן, אלא כדי להעלות את הבריאות הכללית שלו, ולהשאיר אתכן עם שיער שנראה ומרגיש יפה באופן טבעי.",keratinRichTitle:"פורמולות עשירות בקרטין",keratinRichDesc:"פורמולות מתקדמות שמזינות ומחזקות את השיער מבפנים, מספקות חלקות ובריק מתמשכים.",expertStylistsTitle:"מעצבות מומחות",expertStylistsDesc:"המקצועניות המוסמכות שלנו מביאות שנים של ניסיון ותשוקה לכל טיפול, ומבטיחות תוצאות יוצאות דופן.",sustainablySourcedTitle:"מקורות בר-קיימא",sustainablySourcedDesc:"אנחנו משתמשות רק במרכיבים הטובים ביותר, שמקורם אתי, שעדינים לשיער שלכן וידידותיים לסביבה.",ourLatestWork:"העבודות האחרונות שלנו",instagramSubtitle:"ראו את השינויים היפים והלקוחות המרוצות מהפיד שלנו באינסטגרם",shareYourThoughts:"שתפו את המחשבות שלכן",commentPlaceholder:"ספרו לנו על החוויה שלכן או שאלו כל שאלה...",sendViaWhatsApp:"שלחו דרך וואטסאפ",viewOnInstagram:"צפו באינסטגרם",bookYourSessionTitle:"קבעו את התור שלכן",bookingSubtitle:"מוכנות לשנות את השיער שלכן? קבעו תור עם המעצבות המומחות שלנו",fullName:"שם מלא",phoneNumber:"מספר טלפון",emailAddress:"כתובת אימייל",selectService:"בחרו שירות",selectTime:"בחרו שעה",keratinTreatment:"טיפול קרטין",hairStraightening:"החלקת שיער",deepConditioning:"מיזוג עמוק",consultation:"ייעוץ",touchUpSession:"טיפול השלמה",timeSlots:{"09:00":"09:00","10:00":"10:00","11:00":"11:00","12:00":"12:00","14:00":"14:00","15:00":"15:00","16:00":"16:00","17:00":"17:00","18:00":"18:00"},bookingConfirmed:"התור אושר!",confirmationMessage:"תודה {name}! קיבלנו את בקשת התור שלכן עבור {service} בתאריך {date} בשעה {time}. ניצור איתכן קשר בקרוב לאישור התור.",bookAnotherSession:"קבעו תור נוסף",footerTagline:"שנו את השיער שלכן, העלו את הבריאות שלכן עם טיפולי החלקה והזנה פרימיום.",navigation:"ניווט",contactInfo:"פרטי התקשרות",followUs:"עקבו אחרינו",address:"רחוב היופי 123, תל אביב",phone:"+972 50-123-4567",email:"hello@salonsano.com",copyright:"\xa9 2024 סלון סאנו. כל הזכויות שמורות. | מדיניות פרטיות | תנאי שירות",whatsappMessage:"שלום סלון סאנו! {comment}",instagramAlts:{transformation:"שינוי יפה של החלקת שיער",keratinResults:"תוצאות טיפול קרטין",healthyHair:"עיצוב שיער בריא",professionalCare:"טיפוח שיער מקצועי",beforeAfter:"שינוי שיער לפני ואחרי",treatmentProcess:"תהליך הטיפול בסלון סאנו"}},en:{about:"About",services:"Services",gallery:"Gallery",contact:"Contact",bookYourSession:"Book Your Session",heroTitle:"Transform your hair,",heroTitleItalic:"elevate your health",heroSubtitle:"Premium straightening & nourishing treatments",ourPhilosophy:"Our Philosophy",aboutText1:"At Salon Sano, we believe that beautiful hair starts with healthy hair. Our approach combines cutting-edge techniques with natural, nourishing ingredients to transform your hair while maintaining its integrity and vitality.",aboutText2:"Every treatment is carefully crafted to not just straighten your hair, but to elevate its overall health, leaving you with hair that looks and feels naturally beautiful.",keratinRichTitle:"Keratin-rich formulas",keratinRichDesc:"Advanced formulations that nourish and strengthen your hair from within, providing lasting smoothness and shine.",expertStylistsTitle:"Expert stylists",expertStylistsDesc:"Our certified professionals bring years of experience and passion to every treatment, ensuring exceptional results.",sustainablySourcedTitle:"Sustainably sourced",sustainablySourcedDesc:"We use only the finest, ethically sourced ingredients that are gentle on your hair and kind to the environment.",ourLatestWork:"Our Latest Work",instagramSubtitle:"See the beautiful transformations and happy clients from our Instagram feed",shareYourThoughts:"Share Your Thoughts",commentPlaceholder:"Tell us about your experience or ask any questions...",sendViaWhatsApp:"Send via WhatsApp",viewOnInstagram:"View on Instagram",bookYourSessionTitle:"Book Your Session",bookingSubtitle:"Ready to transform your hair? Schedule your appointment with our expert stylists",fullName:"Full Name",phoneNumber:"Phone Number",emailAddress:"Email Address",selectService:"Select a Service",selectTime:"Select Time",keratinTreatment:"Keratin Treatment",hairStraightening:"Hair Straightening",deepConditioning:"Deep Conditioning",consultation:"Consultation",touchUpSession:"Touch-up Session",timeSlots:{"09:00":"09:00","10:00":"10:00","11:00":"11:00","12:00":"12:00","14:00":"14:00","15:00":"15:00","16:00":"16:00","17:00":"17:00","18:00":"18:00"},bookingConfirmed:"Booking Confirmed!",confirmationMessage:"Thank you {name}! We've received your booking request for {service} on {date} at {time}. We'll contact you shortly to confirm your appointment.",bookAnotherSession:"Book Another Session",footerTagline:"Transform your hair, elevate your health with premium straightening and nourishing treatments.",navigation:"Navigation",contactInfo:"Contact",followUs:"Follow Us",address:"123 Beauty Street, Tel Aviv",phone:"+972 50-123-4567",email:"hello@salonsano.com",copyright:"\xa9 2024 Salon Sano. All rights reserved. | Privacy Policy | Terms of Service",whatsappMessage:"Hi Salon Sano! {comment}",instagramAlts:{transformation:"Beautiful straight hair transformation",keratinResults:"Keratin treatment results",healthyHair:"Healthy hair styling",professionalCare:"Professional hair care",beforeAfter:"Hair transformation before and after",treatmentProcess:"Salon Sano treatment process"}}},f=(0,r.createContext)(void 0);function b(e){let{children:t}=e,[a,o]=(0,r.useState)("he"),n="he"===a;return(0,r.useEffect)(()=>{document.documentElement.dir=n?"rtl":"ltr",document.documentElement.lang=a},[a,n]),(0,s.jsx)(f.Provider,{value:{language:a,setLanguage:o,t:e=>{let t=e.split("."),s=p[a];for(let e of t)s=null==s?void 0:s[e];return s||e},isRTL:n},children:t})}function y(){let e=(0,r.useContext)(f);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}var w=a(6858),v=a(2660),j=a(4938);function N(e){let{position:t="top-left",showText:a=!1,variant:r="floating"}=e,{isRTL:n}=y();return(0,s.jsx)(o.E.a,{href:"/",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},whileHover:{scale:1.1},whileTap:{scale:.95},className:"fixed ".concat({"top-left":"top-6 left-6","top-right":"top-6 right-6","bottom-left":"bottom-6 left-6","bottom-right":"bottom-6 right-6"}[t]," z-50 flex items-center justify-center ").concat((()=>{switch(r){case"icon":default:return"w-12 h-12 bg-black text-white rounded-full shadow-lg hover:shadow-xl";case"button":return"px-4 py-2 bg-black text-white rounded-full shadow-lg hover:shadow-xl";case"floating":return"w-14 h-14 bg-black text-white rounded-full shadow-lg hover:shadow-xl border-2 border-white"}})()," transition-all duration-300"),title:n?"חזור לעמוד הבית":"Return to Home",children:a?(0,s.jsxs)("div",{className:"flex items-center space-x-2 ".concat(n?"space-x-reverse font-heebo":""),children:[n?(0,s.jsx)(w.Z,{size:20}):(0,s.jsx)(v.Z,{size:20}),(0,s.jsx)("span",{className:"text-sm font-medium",children:n?"בית":"Home"})]}):(0,s.jsx)(j.Z,{size:"floating"===r?24:20})})}function S(e){let{onSuccess:t}=e,[a,c]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1),[u,m]=(0,r.useState)(""),[x,p]=(0,r.useState)(!1),{login:f}=g(),{isRTL:b}=y(),w=async e=>{e.preventDefault(),p(!0),m(""),await new Promise(e=>setTimeout(e,1e3)),f(a)?t():m(b?"סיסמה שגויה":"Incorrect password"),p(!1)};return(0,s.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 relative",children:[(0,s.jsx)(N,{position:"top-left",variant:"button",showText:!0}),(0,s.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-8 rounded-2xl shadow-lg w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8 ".concat(b?"font-heebo":""),children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-black rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(n.Z,{size:24,className:"text-white"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold mb-2",children:b?"כניסת מנהל":"Admin Login"}),(0,s.jsx)("p",{className:"text-gray-600",children:b?"הזן סיסמה לגישה למערכת הניהול":"Enter password to access admin panel"})]}),(0,s.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:d?"text":"password",value:a,onChange:e=>c(e.target.value),placeholder:b?"סיסמה":"Password",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-black/20 ".concat(b?"text-right font-heebo":""),dir:b?"rtl":"ltr"}),(0,s.jsx)("button",{type:"button",onClick:()=>h(!d),className:"absolute top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 ".concat(b?"left-3":"right-3"),children:d?(0,s.jsx)(l.Z,{size:20}):(0,s.jsx)(i.Z,{size:20})})]}),u&&(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"text-red-500 text-sm text-center ".concat(b?"font-heebo":""),children:u}),(0,s.jsx)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:x,className:"w-full btn-primary py-3 disabled:opacity-50 disabled:cursor-not-allowed ".concat(b?"font-heebo":""),children:x?(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("span",{children:b?"מתחבר...":"Logging in..."})]}):(0,s.jsx)("span",{children:b?"התחבר":"Login"})}),(0,s.jsx)("div",{className:"mt-4 text-center ".concat(b?"font-heebo":""),children:(0,s.jsx)("button",{type:"button",onClick:()=>{window.confirm(b?"האם אתה בטוח שברצונך לאפס את הסיסמה לברירת המחדל?":"Are you sure you want to reset the password to default?")&&(localStorage.removeItem("salon_sano_password"),localStorage.removeItem("salon_sano_auth"),window.location.reload())},className:"text-sm text-gray-500 hover:text-gray-700 underline",children:b?"אפס סיסמה לברירת מחדל":"Reset to default password"})})]}),(0,s.jsx)("div",{className:"mt-6 text-center text-sm text-gray-500 ".concat(b?"font-heebo":""),children:(0,s.jsx)("p",{children:b?"סיסמת ברירת מחדל: salon2024":"Default password: salon2024"})})]}),!1]})}var k=a(3145),C=a(4428),P=a(8930),T=a(8728),E=a(9397),A=a(7692),I=a(6865),z=a(2489),Z=a(3581),H=a(2207),D=a(6362),L=a(7689);let O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return new Promise((s,r)=>{let o=document.createElement("canvas"),n=o.getContext("2d"),l=new Image;l.onload=()=>{let{width:e,height:r}=l;e>r?e>t&&(r=r*t/e,e=t):r>t&&(e=e*t/r,r=t),o.width=e,o.height=r,null==n||n.drawImage(l,0,0,e,r);let i=o.toDataURL("image/jpeg",a);i.length>5e5?s(o.toDataURL("image/jpeg",.5)):s(i)},l.onerror=()=>r(Error("Failed to load image")),l.src=URL.createObjectURL(e)})},_=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return Number.parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};function R(e){let{isOpen:t,onClose:a}=e,[c,d]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[h,u]=(0,r.useState)({current:!1,new:!1,confirm:!1}),[m,x]=(0,r.useState)(""),[p,f]=(0,r.useState)(!1),[b,w]=(0,r.useState)(!1),{changePassword:v}=g(),{isRTL:j}=y(),N=async e=>{if(e.preventDefault(),x(""),w(!0),c.newPassword!==c.confirmPassword){x(j?"הסיסמאות החדשות אינן תואמות":"New passwords don't match"),w(!1);return}if(c.newPassword.length<6){x(j?"הסיסמה החדשה חייבת להכיל לפחות 6 תווים":"New password must be at least 6 characters"),w(!1);return}await new Promise(e=>setTimeout(e,1e3)),v(c.currentPassword,c.newPassword)?(f(!0),d({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>{f(!1),a()},2e3)):x(j?"הסיסמה הנוכחית שגויה":"Current password is incorrect"),w(!1)},S=e=>{u(t=>({...t,[e]:!t[e]}))};return t?(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)(o.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-8 w-full max-w-md",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6 ".concat(j?"flex-row-reverse":""),children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 ".concat(j?"space-x-reverse":""),children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-black rounded-full flex items-center justify-center",children:(0,s.jsx)(n.Z,{size:20,className:"text-white"})}),(0,s.jsx)("h2",{className:"text-xl font-bold ".concat(j?"font-heebo":""),children:j?"שינוי סיסמה":"Change Password"})]}),(0,s.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)(z.Z,{size:24})})]}),p?(0,s.jsxs)(o.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-green-600 mb-2 ".concat(j?"font-heebo":""),children:j?"הסיסמה שונתה בהצלחה!":"Password Changed Successfully!"}),(0,s.jsx)("p",{className:"text-gray-600 ".concat(j?"font-heebo":""),children:j?"הסיסמה החדשה שלך נשמרה":"Your new password has been saved"})]}):(0,s.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(j?"font-heebo text-right":""),children:j?"סיסמה נוכחית":"Current Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:h.current?"text":"password",value:c.currentPassword,onChange:e=>d({...c,currentPassword:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black/20 ".concat(j?"text-right font-heebo pr-10":"pr-10"),dir:j?"rtl":"ltr"}),(0,s.jsx)("button",{type:"button",onClick:()=>S("current"),className:"absolute top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 ".concat(j?"left-3":"right-3"),children:h.current?(0,s.jsx)(l.Z,{size:16}):(0,s.jsx)(i.Z,{size:16})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(j?"font-heebo text-right":""),children:j?"סיסמה חדשה":"New Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:h.new?"text":"password",value:c.newPassword,onChange:e=>d({...c,newPassword:e.target.value}),required:!0,minLength:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black/20 ".concat(j?"text-right font-heebo pr-10":"pr-10"),dir:j?"rtl":"ltr"}),(0,s.jsx)("button",{type:"button",onClick:()=>S("new"),className:"absolute top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 ".concat(j?"left-3":"right-3"),children:h.new?(0,s.jsx)(l.Z,{size:16}):(0,s.jsx)(i.Z,{size:16})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(j?"font-heebo text-right":""),children:j?"אישור סיסמה חדשה":"Confirm New Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:h.confirm?"text":"password",value:c.confirmPassword,onChange:e=>d({...c,confirmPassword:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black/20 ".concat(j?"text-right font-heebo pr-10":"pr-10"),dir:j?"rtl":"ltr"}),(0,s.jsx)("button",{type:"button",onClick:()=>S("confirm"),className:"absolute top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 ".concat(j?"left-3":"right-3"),children:h.confirm?(0,s.jsx)(l.Z,{size:16}):(0,s.jsx)(i.Z,{size:16})})]})]}),m&&(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"text-red-500 text-sm ".concat(j?"font-heebo text-right":""),children:m}),(0,s.jsxs)("div",{className:"flex space-x-3 pt-4 ".concat(j?"space-x-reverse":""),children:[(0,s.jsx)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:b,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed ".concat(j?"font-heebo":""),children:b?(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("span",{children:j?"משנה...":"Changing..."})]}):(0,s.jsx)("span",{children:j?"שנה סיסמה":"Change Password"})}),(0,s.jsx)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"button",onClick:a,className:"flex-1 btn-secondary ".concat(j?"font-heebo":""),children:j?"ביטול":"Cancel"})]})]})]})}):null}function B(){let{posts:e,logout:t,addPost:a,removePost:n,updatePost:l,clearAllPosts:i,storageInfo:c}=g(),{isRTL:d}=y(),[h,u]=(0,r.useState)(!1),[m,x]=(0,r.useState)(!1),[p,f]=(0,r.useState)(null),[b,w]=(0,r.useState)({image:"",url:"",alt:""}),[v,j]=(0,r.useState)(null),[S,B]=(0,r.useState)(!1),[M,U]=(0,r.useState)(""),q=(0,r.useRef)(null),F=async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){if(U(""),!a.type.startsWith("image/")){U(d?"אנא בחר קובץ תמונה תקין":"Please select a valid image file");return}if(a.size>10485760){U(d?"גודל הקובץ חייב להיות קטן מ-10MB":"File size must be less than 10MB");return}B(!0);try{let e=await O(a,800,.7);if(e.length>5e5){let e=await O(a,600,.5);j(e),w({...b,image:e})}else j(e),w({...b,image:e});B(!1)}catch(e){console.error("Error compressing image:",e),U(d?"שגיאה בעיבוד התמונה":"Error processing image"),B(!1)}}},W=async e=>{e.preventDefault(),U("");try{let e=!1;if(p?(e=await l(p,b))&&f(null):(e=await a(b))&&u(!1),!e){U(d?"שגיאה בשמירה - אין מספיק מקום באחסון. נסה להקטין את התמונה או למחוק פוסטים ישנים":"Storage error - not enough space. Try a smaller image or delete old posts");return}w({image:"",url:"",alt:""}),j(null)}catch(e){console.error("Error saving post:",e),U(d?"שגיאה בשמירת הפוסט":"Error saving post")}},Y=e=>{w({image:e.image,url:e.url,alt:e.alt}),j(e.image),f(e.id),u(!0),U("")},J=()=>{u(!1),f(null),w({image:"",url:"",alt:""}),j(null),U("")},K=c.used/(c.used+c.available)*100;return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100 relative",children:[(0,s.jsx)(N,{position:d?"top-right":"top-left",variant:"floating"}),(0,s.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,s.jsx)("div",{className:"container-max section-padding",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16 ".concat(d?"flex-row-reverse":""),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold ".concat(d?"font-heebo":""),children:d?"ניהול פוסטים":"Posts Management"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 mt-1 ".concat(d?"space-x-reverse font-heebo":""),children:[(0,s.jsx)(C.Z,{size:14}),(0,s.jsxs)("span",{children:[_(c.used)," / ",_(c.used+c.available)]}),(0,s.jsx)("div",{className:"w-20 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full transition-all duration-300 ".concat(K>80?"bg-red-500":K>60?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(K,100),"%")}})})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 ".concat(d?"space-x-reverse":""),children:[e.length>0&&(0,s.jsxs)(o.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{window.confirm(d?"האם אתה בטוח שברצונך למחוק את כל הפוסטים?":"Are you sure you want to delete all posts?")&&i()},className:"btn-secondary flex items-center space-x-2 text-red-600 border-red-600 hover:bg-red-600 hover:text-white ".concat(d?"space-x-reverse font-heebo":""),children:[(0,s.jsx)(P.Z,{size:16}),(0,s.jsx)("span",{children:d?"מחק הכל":"Clear All"})]}),(0,s.jsxs)(o.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>x(!0),className:"btn-secondary flex items-center space-x-2 ".concat(d?"space-x-reverse font-heebo":""),children:[(0,s.jsx)(T.Z,{size:20}),(0,s.jsx)("span",{children:d?"שנה סיסמה":"Change Password"})]}),(0,s.jsxs)(o.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(!0),className:"btn-primary flex items-center space-x-2 ".concat(d?"space-x-reverse font-heebo":""),children:[(0,s.jsx)(E.Z,{size:20}),(0,s.jsx)("span",{children:d?"הוסף פוסט":"Add Post"})]}),(0,s.jsxs)(o.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"btn-secondary flex items-center space-x-2 ".concat(d?"space-x-reverse font-heebo":""),children:[(0,s.jsx)(A.Z,{size:20}),(0,s.jsx)("span",{children:d?"התנתק":"Logout"})]})]})]})})}),(0,s.jsxs)("div",{className:"container-max section-padding py-8",children:[K>80&&(0,s.jsx)(o.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3 ".concat(d?"space-x-reverse":""),children:[(0,s.jsx)(I.Z,{size:20,className:"text-yellow-600"}),(0,s.jsxs)("div",{className:d?"font-heebo text-right":"",children:[(0,s.jsx)("h3",{className:"font-semibold text-yellow-800",children:d?"אחסון כמעט מלא":"Storage Almost Full"}),(0,s.jsx)("p",{className:"text-yellow-700 text-sm",children:d?"מומלץ למחוק פוסטים ישנים או להשתמש בתמונות קטנות יותר":"Consider deleting old posts or using smaller images"})]})]})}),h&&(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)(o.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl p-8 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6 ".concat(d?"flex-row-reverse":""),children:[(0,s.jsx)("h2",{className:"text-xl font-bold ".concat(d?"font-heebo":""),children:p?d?"ערוך פוסט":"Edit Post":d?"הוסף פוסט חדש":"Add New Post"}),(0,s.jsx)("button",{onClick:J,className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)(z.Z,{size:24})})]}),M&&(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2 ".concat(d?"space-x-reverse":""),children:[(0,s.jsx)(I.Z,{size:16,className:"text-red-600"}),(0,s.jsx)("p",{className:"text-red-700 text-sm ".concat(d?"font-heebo text-right":""),children:M})]})}),(0,s.jsxs)("form",{onSubmit:W,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(d?"font-heebo text-right":""),children:d?"תמונה":"Image"}),v&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)(k.default,{src:v||"/placeholder.svg",alt:"Preview",width:500,height:300,className:"w-full h-48 object-cover rounded-lg border border-gray-200"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1 ".concat(d?"font-heebo text-right":""),children:d?"התמונה נדחסה לחיסכון במקום":"Image compressed to save space"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"button",onClick:()=>{var e;null===(e=q.current)||void 0===e||e.click()},disabled:S,className:"w-full flex items-center justify-center space-x-2 py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 transition-colors disabled:opacity-50 ".concat(d?"space-x-reverse font-heebo":""),children:S?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("span",{children:d?"מעבד...":"Processing..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Z.Z,{size:20,className:"text-gray-400"}),(0,s.jsx)("span",{className:"text-gray-600",children:d?"העלה תמונה (נדחס אוטומטית)":"Upload Image (Auto-compressed)"})]})}),(0,s.jsx)("div",{className:"text-center text-sm text-gray-500 ".concat(d?"font-heebo":""),children:d?"או":"or"}),(0,s.jsx)("input",{type:"url",value:b.image,onChange:e=>{w({...b,image:e.target.value}),j(e.target.value),U("")},placeholder:d?"הדבק קישור לתמונה":"Paste image URL",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black/20 ".concat(d?"text-right font-heebo":""),dir:d?"rtl":"ltr"})]}),(0,s.jsx)("input",{ref:q,type:"file",accept:"image/*",onChange:F,className:"hidden"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(d?"font-heebo text-right":""),children:d?"קישור לאינסטגרם":"Instagram URL"}),(0,s.jsx)("input",{type:"url",value:b.url,onChange:e=>w({...b,url:e.target.value}),placeholder:"https://instagram.com/p/...",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black/20 ".concat(d?"text-right font-heebo":""),dir:d?"rtl":"ltr"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(d?"font-heebo text-right":""),children:d?"תיאור התמונה":"Image Description"}),(0,s.jsx)("input",{type:"text",value:b.alt,onChange:e=>w({...b,alt:e.target.value}),placeholder:d?"תיאור התמונה...":"Image description...",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black/20 ".concat(d?"text-right font-heebo":""),dir:d?"rtl":"ltr"})]}),(0,s.jsxs)("div",{className:"flex space-x-3 pt-4 ".concat(d?"space-x-reverse":""),children:[(0,s.jsx)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:!b.image||S,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed ".concat(d?"font-heebo":""),children:p?d?"עדכן":"Update":d?"הוסף":"Add"}),(0,s.jsx)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"button",onClick:J,className:"flex-1 btn-secondary ".concat(d?"font-heebo":""),children:d?"ביטול":"Cancel"})]})]})]})}),(0,s.jsx)(R,{isOpen:m,onClose:()=>x(!1)}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e,t)=>(0,s.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow",children:[(0,s.jsxs)("div",{className:"aspect-square relative",children:[(0,s.jsx)(k.default,{src:e.image||"/placeholder.svg",alt:e.alt,layout:"fill",objectFit:"cover"})," ",(0,s.jsxs)("div",{className:"absolute inset-0 bg-black/50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center space-x-4",children:[(0,s.jsx)(o.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>Y(e),className:"w-10 h-10 bg-white rounded-full flex items-center justify-center text-black hover:bg-gray-100",children:(0,s.jsx)(H.Z,{size:16})}),(0,s.jsx)(o.E.a,{whileHover:{scale:1.1},whileTap:{scale:.9},href:e.url,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-white rounded-full flex items-center justify-center text-black hover:bg-gray-100",children:(0,s.jsx)(D.Z,{size:16})}),(0,s.jsx)(o.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>n(e.id),className:"w-10 h-10 bg-red-500 rounded-full flex items-center justify-center text-white hover:bg-red-600",children:(0,s.jsx)(P.Z,{size:16})})]})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 ".concat(d?"font-heebo text-right":""),children:e.alt}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-2 ".concat(d?"font-heebo text-right":""),children:new Date(e.createdAt).toLocaleDateString(d?"he-IL":"en-US")})]})]},e.id))}),0===e.length&&(0,s.jsxs)("div",{className:"text-center py-12 ".concat(d?"font-heebo":""),children:[(0,s.jsx)(L.Z,{size:48,className:"mx-auto text-gray-400 mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:d?"אין פוסטים עדיין":"No posts yet"}),(0,s.jsx)("p",{className:"text-gray-500",children:d?"הוסף את הפוסט הראשון שלך":"Add your first post to get started"})]})]})]})}function M(){return(0,s.jsx)(x,{children:(0,s.jsxs)(b,{children:[" ",(0,s.jsx)(U,{})]})})}function U(){let{isAuthenticated:e}=g(),[t,a]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{a(e)},[e]),t)?(0,s.jsx)(B,{}):(0,s.jsx)(S,{onSuccess:()=>a(!0)})}}},function(e){e.O(0,[878,957,971,117,744],function(){return e(e.s=2241)}),_N_E=e.O()}]);